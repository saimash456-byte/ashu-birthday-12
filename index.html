<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advance Birthday Wish - Ashu Janu</title>
    <style>
        :root { --rose: #ff4d6d; --deep: #590d22; --gold: #d4af37; }
        body, html { margin: 0; padding: 0; overflow: hidden; font-family: 'Poppins', serif; background: #000; color: white; touch-action: none; }

        .stage { display: none; width: 100vw; height: 100vh; justify-content: center; align-items: center; flex-direction: column; text-align: center; position: absolute; }
        .active { display: flex; animation: fadeIn 1s forwards; }

        /* Backgrounds */
        #stage1 { background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), url('https://images.unsplash.com/photo-1518199266791-5375a83190b7?auto=format&fit=crop&q=80&w=1000'); background-size: cover; }
        #stage2 { background: #1a0d06; }
        #stage5 { background: #fff5f5; color: #333; overflow-y: auto; display: none; }

        /* Door */
        .door-frame { width: 150px; height: 250px; border: 8px solid #3d2b1f; background: #5d4037; cursor: pointer; transform-style: preserve-3d; transition: 1.2s; position: relative; }
        .door-open { transform: rotateY(-130deg); transform-origin: left; }

        /* Signature Pad */
        canvas { border: 2px dashed var(--rose); background: #fff; border-radius: 10px; cursor: crosshair; touch-action: none; }

        /* Buttons */
        .btn { padding: 15px 30px; border-radius: 50px; border: none; font-weight: bold; cursor: pointer; margin: 10px; transition: 0.3s; }
        .btn-yes { background: var(--rose); color: white; }
        .btn-no { background: #444; color: white; position: relative; }

        /* Letter Styling */
        .letter-header { position: sticky; top: 0; background: var(--rose); color: white; width: 100%; padding: 10px 0; font-size: 1.1rem; z-index: 10; }
        .special { color: var(--rose); font-family: 'Cursive', sans-serif; font-size: 1.5rem; }
        
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .heart-fall { position: absolute; top: -10%; animation: fall 4s linear forwards; }
        @keyframes fall { to { transform: translateY(110vh) rotate(360deg); } }
    </style>
</head>
<body>

    <audio id="bgMusic" loop><source src="https://www.bensound.com/bensound-music/bensound-love.mp3" type="audio/mpeg"></audio>

    <div id="stage1" class="stage active">
        <h1 style="text-shadow: 2px 2px 10px #000;">Ashu Janu, Suniye! ğŸ’Œ</h1>
        <button class="btn btn-yes" onclick="start()">Koi aaya hai darwaze par...</button>
    </div>

    <div id="stage2" class="stage">
        <h2 style="color:var(--gold)">Darwaza Kholiye... ğŸšª</h2>
        <div class="door-frame" id="door" onclick="openDoor()">
            <div style="position:absolute; right:10px; top:50%; width:15px; height:15px; background:gold; border-radius:50%;"></div>
        </div>
    </div>

    <div id="stage3" class="stage" style="background:rgba(0,0,0,0.9)">
        <div style="background:white; color:#333; padding:20px; border-radius:15px;">
            <h3>Yahan apne Sign karein ğŸ–‹ï¸</h3>
            <canvas id="signPad" width="280" height="150"></canvas><br>
            <button class="btn btn-yes" onclick="nextStage(4)">OK, Sign Ho Gaye</button>
        </div>
    </div>

    <div id="stage4" class="stage" style="background:var(--deep)">
        <div id="sadFace" style="display:none; font-size: 50px; margin-bottom: 20px;">ğŸ˜­</div>
        <h2>Mera Khat kholna hai? ğŸ’Œ</h2>
        <div id="decisionBox">
            <button class="btn btn-yes" onclick="confirmOpen()">Ji Bilkul! ğŸ˜</button>
            <button class="btn btn-no" id="noBtn" onclick="sayNo()">Nhi ğŸ˜¢</button>
        </div>
    </div>

    <div id="stage5" class="stage">
        <div class="letter-header">â³ 12 Days Left for the Big Day!</div>
        <div style="padding: 40px 20px; max-width: 500px; text-align: left;">
            <center><h2 class="special">Advance Happy Birthday <br>Ashu Janu! ğŸ‚</h2></center>
            <p><i>Meri <span class="special">Rahat-e-Jaan</span>,</i></p>
            <div id="fullLetter"></div>
            <center><button id="moreBtn" class="btn btn-yes" onclick="revealMore()">Read More â¤ï¸</button></center>
        </div>
    </div>

    <script>
        const music = document.getElementById('bgMusic');
        const lines = [
            "Tumhare hone se main mukammal ho jata hoonâ€¦",
            "aur jab tum door hoti ho, to jaise kuch adhoora reh jata hai ğŸ’”",
            "Tumhari ek jhalak mere dil ko sakoon de deti hai,",
            "aur tumhein dekhe baghair mera dil bechain rehta hai ğŸ«€",
            "Tum muskurati ho to lagta hai waqt tham sa gaya ho,",
            "aur jab udaas hoti ho, to meri duniya bhi khamosh ho jati hai ğŸŒ§ï¸",
            "Tum meri zindagi ka wo hissa ho jiske baghair har khushi adhoori lagti hai âœ¨",
            "Tumhara naam lene se hi dil halka ho jata hai, jaise har dua qubool hone wali ho ğŸ¤²",
            "Tum ho to har din khoobsurat lagta hai, tum na ho to har pal intezar ban jata hai â³",
            "Tum meri rahat bhi ho aur meri aadat bhi, tumhari zaroorat mujhe har saans ke saath mehsoos hoti hai ğŸ¤",
            "Tumhein dekh kar mujhe apni zindagi par yaqeen aa jata hai, ke haanâ€¦ pyaar sach mein hota hai ğŸ’",
            "Tum meri kamzori bhi ho aur meri taqat bhi, tum se hi meri pehchan hai ğŸ’",
            "Tumhara saath ho to darr bhi aasaan lagta hai, aur tumhara khayal ho to raat bhi roshan ho jati hai ğŸŒ™",
            "Tum meri kahani ka sabse khoobsurat hissa ho, aur meri har kahani tum se hi shuru hoti hai ğŸ“–",
            "Tum ho to main hoon, tum na ho to main sirf ek khali sa ehsaas hoonâ€¦",
            "<b>Advance Happy Birthday meri pyari Ashu Janu ğŸ‚ğŸ’–</b>",
            "<b>Tum meri rahat-e-jaan, mera sakoon-e-qalb ho</b>"
        ];

        function start() { music.play(); nextStage(2); }
        function nextStage(n) { document.querySelectorAll('.stage').forEach(s => {s.classList.remove('active'); s.style.display='none';}); const st = document.getElementById('stage'+n); st.style.display='flex'; st.classList.add('active'); }
        function openDoor() { document.getElementById('door').classList.add('door-open'); setTimeout(() => nextStage(3), 1200); }

        function sayNo() {
            document.getElementById('sadFace').style.display = 'block';
            alert("Nhi kyun? ğŸ˜­ Please 'Ji Bilkul' kaho!");
        }

        function confirmOpen() {
            alert("Thanks! ğŸ˜ ğŸ‰");
            nextStage(5);
            showInitial();
            setInterval(createHeart, 400);
        }

        function showInitial() {
            const container = document.getElementById('fullLetter');
            for(let i=0; i<7; i++) container.innerHTML += `<p>${lines[i]}</p>`;
        }

        function revealMore() {
            document.getElementById('moreBtn').style.display = 'none';
            const container = document.getElementById('fullLetter');
            container.innerHTML = "";
            lines.forEach(line => container.innerHTML += `<p>${line}</p>`);
        }

        function createHeart() {
            const h = document.createElement('div');
            h.className = 'heart-fall';
            h.innerHTML = 'â¤ï¸';
            h.style.left = Math.random() * 100 + 'vw';
            h.style.color = 'red';
            document.getElementById('stage5').appendChild(h);
            setTimeout(() => h.remove(), 4000);
        }

        // --- Improved Signature Logic (Mobile & PC) ---
        const canvas = document.getElementById('signPad');
        const ctx = canvas.getContext('2d');
        let drawing = false;

        function getPos(e) {
            const rect = canvas.getBoundingClientRect();
            return {
                x: (e.clientX || e.touches[0].clientX) - rect.left,
                y: (e.clientY || e.touches[0].clientY) - rect.top
            };
        }

        function startDraw(e) { drawing = true; draw(e); }
        function endDraw() { drawing = false; ctx.beginPath(); }
        function draw(e) {
            if (!drawing) return;
            const pos = getPos(e);
            ctx.lineWidth = 3;
            ctx.lineCap = 'round';
            ctx.strokeStyle = '#333';
            ctx.lineTo(pos.x, pos.y);
            ctx.stroke();
            ctx.beginPath();
            ctx.moveTo(pos.x, pos.y);
        }

        canvas.addEventListener('mousedown', startDraw);
        canvas.addEventListener('mousemove', draw);
        canvas.addEventListener('mouseup', endDraw);
        canvas.addEventListener('touchstart', (e) => { e.preventDefault(); startDraw(e); });
        canvas.addEventListener('touchmove', (e) => { e.preventDefault(); draw(e); });
        canvas.addEventListener('touchend', endDraw);

    </script>
</body>
</html>
